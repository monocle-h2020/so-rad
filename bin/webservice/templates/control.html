{% extends "layout.html" %}
{% block content %}
  <div class="jumbo">
    <h2>Control</h2>
  </div>

  <div>
   <form action="/control" method = "POST">
    <!-- value is the button label and dict value, name is the key in the returned dict-->
    <p>
    Choose a command below. This will be executed immediately and the webservice will not reload until the process has finished.<br.
    Long execution times may generate a web page timeout notification, while the command continues to run.   
    </p>
    <p>
      <input type = "submit" value = "Restart So-Rad service" name="restart"/>  
      <input type = "submit" value = "Stop So-Rad service" name="stop"/>
      <input type = "submit" value = "Check So-Rad service status" name="check"/>
      {% if common['so-rad_status']==true %}
        <div style="color:#ffffff;background-color:#11cc11;font-weight:medium">So-Rad service is running</div>
      {% else %}
        <div style="color:#000000;background-color:#ee1111;font-weight:bold">So-Rad service is not running</div>
      {% endif %}
    </p>
    <p>
    <b>Set access level for remote assistance:</b><br>
       'always' allows remote assistance (default).<br>
       'session' provides access for the current session (until system restart).<br>
       'disable' removes access until is is granted again.<br>
       <input type = "submit" value = "always" name="shellhub_always"/>
       <input type = "submit" value = "session" name="shellhub_session"/>
       <input type = "submit" value = "disable" name="shellhub_disable"/>
    </p>

    <p>
    <b>GPS test (requires So-Rad service to be stopped first):</b><br>
       <input type = "submit" value = "Test GPS" name="gps_test"/>
    </p>
    <p>
    <b>Data export (requires So-Rad service to be stopped first):</b><br>
       <input type = "submit" value = "Data export status" name="export_test"/>
       <input type = "submit" value = "Upload data now" name="export_test_force"/>
    </p>
    <p>
    <b>System reboot:</b><br>
       <input type = "submit" value = "Reboot" name="reboot"/>
       <input type = "submit" value = "Cancel Reboot" name="cancelreboot"/>
    </p>
    <p>
    <b>System shutdown:</b><br>
    <b>Warning: Once shut down, a power cycle is needed to restart the system! This cannot be done remotely.</b><br> 
       <input type = "submit" value = "Shutdown" name="shutdown"/>
       <input type = "submit" value = "Cancel Shutdown" name="cancelreboot"/>
    </p>
  </p>
   </form>
  </div>
<br>
  <div>
    <p>
    <b>Results from the last command:</b>
    </p>
    {% for message in messages %}
      {{ message }}<br>
    {% endfor %}
  </div>

{% endblock %}

